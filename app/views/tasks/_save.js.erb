<% if @task.errors.any? %>
  $("#modal-task").html("<%= j(render 'form', locals: {task: @task}) %>");
<% else %>
  var $task_item = $("#task-id-<%= @task.id %>");

  if(0 == $task_item.length) {
    $("#tasks ul").prepend("<%= j(render @task) %>");
  } else {
    $task_item.replaceWith("<%= j(render @task) %>");
  }

  $("#modal-task").modal("hide");
  $("#alert-no-tasks").hide();

  var $alert = $('#alert-save');

  $alert.find('p').html("<%= notice %>");
  $alert.removeClass('hidden').show();

  setTimeout(function() {
      $alert.fadeToggle('fast', 'linear')
    },
    1500
  );
<% end %>
